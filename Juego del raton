#include<stdio.h>
#include<time.h>

void loop (char matr [3][3]);
void Num_tab (char matr [3][3]);
void tab (char matr [3][3]);
void Usuario (char matr[3][3]);

int main()
{
    char matr[3][3];
    loop (matr);
    system("pause");
    return 0;
}

void loop (char matr [3][3])
{
    int i=0,j=0;
    Num_tab(matr);
    do
    {
        system("cls");
        tab(matr);
        Usuario(matr);
        if(matr[1][2]=='X')
        {
            j=1;
        }
        i++;
    }while(i<=3 && j==0);
    system("cls");
    tab(matr);
    if(j=1)
    {
        printf("Has gando\n");
    }
    else if (j=0)
    {
        printf("Has perdido\n");
    }
}

void Num_tab (char matr [3][3])
{
     int i,j;
     char aux='1';
     for (i=0; i<3; i++)
     {
         for(j=0; j<3; j++)
         {
             matr[i][j]= aux++;
         }
     }
}
void Usuario (char matr[3][3])
{
    char aux;
    int i,j,k=0;
    do
    {
        do
        {
            printf("      ADIVINA DONDE ESTA EL RATON\n");
            printf("Instrucciones: Tienes 3 intentos para adivinar el raton. Para ello solo basta con escribir el numero donde creas que esta\n");
            printf("Escribe el numero:\n");
            fflush(stdin);
            scanf("%c",&aux);
        }
        while(aux<'1' || aux>'9');

        switch(aux)
        {
        case '1':
            {
                i=0;
                j=0;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '2':
            {
                i=0;
                j=1;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '3':
            {
                i=0;
                j=2;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '4':
            {
                i=1;
                j=0;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '5':
            {
                i=1;
                j=1;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '6':
            {
                i=1;
                j=2;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '7':
            {
                i=2;
                j=0;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '8':
            {
                i=2;
                j=1;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        case '9':
            {
                i=2;
                j=2;
                if(matr[i][j]=='X')
                {
                    k=1;
                    printf("Casilla ocupada");
                }
                break;
            }
        }
    }while(k==1);
    matr[i][j]='X';
}

void tab (char matr [3][3])
{
    int i,j;
    for(i=0; i<3; i++)
    {
        for(j=0; j<3; j++)
        {
            if (j<2)
            {
                printf(" %c |",matr[i][j]);
            }
            else
            {
                printf(" %c ",matr[i][j]);
            }
        }
        if(i<2)
        {
            printf("\n-----------\n");
        }
    }
    printf("\n\n");
}